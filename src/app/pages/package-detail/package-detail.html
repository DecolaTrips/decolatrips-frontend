<app-navbar></app-navbar>

<header class="relative min-h-[86vh] w-full flex items-center justify-center mb-2"
  [ngStyle]="{ 'background-image': 'url(' + item.images[0].urlImg + ')', 'background-size': 'cover', 'background-position': 'top' }">
  <div class="relative z-10 text-center">
    <p class="text-white text-2xl">{{ item.place }}</p>
    <h1 class="text-white text-6xl">{{ item.title }}</h1>
  </div>

  <div class="h-[86vh] absolute inset-0 bg-black opacity-20">
  </div>
  <div
    class="mx-4 flex px-2 py-2 items-center rounded-sm max-w-[1000px] w-fit -bottom-4.5 absolute h-14 bg-white shadow-xl shadow-[#44444411] border border-[#D9D9D9]">

    <div
      class="flex gap-2 md:gap-4 h-full w-full items-center justify-center text-base md:text-xl font-semibold text-secondary-light">
      <p>{{ item.durationDays }} dias / {{ item.durationDays - 1 }} noites</p>
      <div class="border-l-1 border-gray-300 h-8"></div>

      <div class="flex flex-col items-center"> <!-- Container novo para agrupar preço e span -->
        <p>R$ {{ item.valorBase }} <span class="text-base text-primary">/ pessoa</span></p>

        <div class="flex flex-row">
          <img src="warning.svg" alt="warning" class="h-4">
          <span class="text-xs font-normal text-blue-400">
            Esse preço não inclui as passagens aéreas
          </span>
        </div>

      </div>
    </div>
    <button class="w-48 h-full bg-primary text-white rounded-md hover:bg-primary-dark transition-colors cursor-pointer">
      <a href="/package/{{ item.id }}#reservar">Comprar Pacote</a>
    </button>
  </div>
</header>


<main>
  <section class="container mx-auto p-4">
    <div class="flex items-center my-6">
      <h2 class="text-2xl font-bold">Descrição</h2>
      <hr class="flex-1 border-gray-300 mx-4 0">
    </div>
    <p>{{ item.description }}</p>
  </section>

  @if (item.images && item.images.length > 1) {
  <section class="container mx-auto p-4">
    <div class="flex items-center mb-8">
      <h2 class="text-2xl font-bold">Destaques da Viagem</h2>
      <hr class="flex-1 border-gray-300 mx-4 0">
    </div>
    <div class="flex flex-col gap-4">
      <app-swiper-container>
        @for (image of item.images; track $index) {
        @if ($index > 0) {
        <swiper-slide>
          <app-package-highlight-card [imageUrl]="image.urlImg"
            [description]="image.descriptionImg"></app-package-highlight-card>
        </swiper-slide>
        }
        }
      </app-swiper-container>
    </div>
  </section>
  }

  <section class="container mx-auto p-4" id="reservar">
    <div class="flex items-center my-4">
      <h2 class="text-2xl font-bold">Datas e Preços</h2>
      <hr class="flex-1 border-gray-300 mx-4 0">
    </div>
    @if (item.availabilities && item.availabilities.length === 0) {

    <p class="text-secondary-light">Ainda não há datas disponíveis para este pacote</p>
    } @else {
    <table class="min-w-full table-auto border-collapse border border-gray-300">
      <thead>
        <tr class="bg-gray-100 text-left text-lg font-semibold text-gray-700">
          <th class="px-4 py-2 border-b">Período</th>
          <div class="flex items-row border-b">
            <th class="px-4 py-2 flex flex-col w-full max-w-[300px]"> <!-- Ajuste o max-w conforme necessário -->
              <span class="block">Preço por pessoa</span>
              <span class="text-xs text-gray-600 font-normal break-words whitespace-normal block">
                (O valor da passagem só será disponível na reserva do pacote, por ser sujeito a alterações)
              </span>
            </th>
          </div>
          <th class="px-4 py-2 border-b"></th>
        </tr>
      </thead>
      <tbody>
        @for (availability of item.availabilities; track $index) {
        <tr class="text-base text-gray-800">
          <td class="px-4 py-4">
            De {{ availability.dateIn | date: 'dd/MM/yyyy' }} até {{ availability.dateOut | date: 'dd/MM/yyyy' }}
          </td>
          <td class="px-4 py-1">R${{ availability.price }}</td>
          <td class="px-4 py-1 text-center">
            <button class="block bg-primary text-white w-full py-1 rounded-xs cursor-pointer"
              (click)="makeReservations(availability.id)">Reservar Periodo</button>
          </td>
        </tr>
        <tr>
          <td colspan="3">
            <hr class="border-gray-200 my-0">
          </td>
        </tr>
        }
      </tbody>
    </table>
    }
  </section>

  <section class="container mx-auto p-4">
    <div class="flex items-center my-4">
      <h2 class="text-2xl font-bold">Informações Adicionais</h2>
      <hr class="flex-1 border-gray-300 mx-4 0">
    </div>
    <ul class="list-disc gap-4 flex flex-col">
      <li><app-info-card title="O que esta incluso">
          <ul class="space-y-1 text-gray-700">
            <li>Passagens aéreas de ida e volta</li>
            <li>Hospedagem em hotel 3 ou 4 estrelas (dependendo da opção escolhida)</li>
            <li>Café da manhã incluso todos os dias</li>
            <li>Traslados entre aeroporto e hotel</li>
            <li>Passeios e atividades guiadas conforme o itinerário</li>
            <li>Seguro viagem</li>
            <li>Suporte 24h durante toda a viagem</li>
          </ul>
        </app-info-card></li>
      <li><app-info-card title="Requisitos">
          <ul class="space-y-1 text-gray-700">
            <li>Documento de identificação válido (RG ou passaporte, conforme o destino)</li>
            <li>Visto e/ou vacinas obrigatórias exigidas pelo país de destino (quando aplicável)</li>
            <li>Ter pelo menos 18 anos ou estar acompanhado por um responsável legal</li>
            <li>Realizar o pagamento completo do pacote até a data limite informada</li>
            <li>Apresentar comprovante de reserva no momento do embarque</li>
          </ul>
        </app-info-card></li>
    </ul>
  </section>

  <section class="container mx-auto p-4">
    <a href="pdfs/DestinoEgito.pdf" download="">
      <div
        class="w-full h-32 flex border border-gray-400 items-center justify-center hover:cursor-pointer hover:bg-gray-200">
        Clique aqui para baixar o itinerario da viagem
      </div>
    </a>
  </section>

  <section class="container mx-auto p-4">
    <app-google-maps [place]="item.place"></app-google-maps>
  </section>

  <section class="container mx-auto p-4">
    <div class="flex items-center my-4">
      <h2 class="text-2xl font-bold">Avaliações dos viajantes</h2>
      <hr class="flex-1 border-gray-300 mx-4 0">
    </div>
    <app-rating [packageId]="item.id">

    </app-rating>
  </section>
</main>
