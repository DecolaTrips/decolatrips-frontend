<div class="bg-gray-100 p-6 flex flex-col">
  <h2 class="text-2xl font-bold mb-6">
    Cadastrar Pacote de Viagem
  </h2>

  <div class="flex items-center justify-between mb-6">
    <div class="flex text-sm border border-gray-300 w-fit rounded-md">
      <button (click)="activeTab = 1" [ngClass]="{
          'bg-black text-white': activeTab === 1,
          'bg-white text-black hover:bg-gray-200': activeTab !== 1
        }" class="bg-black text-white px-6 rounded-l-md h-10 transition">
        Dados de venda
      </button>
      <button (click)="activeTab = 2" [ngClass]="{
          'bg-black text-white': activeTab === 2,
          'bg-white text-black hover:bg-gray-200': activeTab !== 2
        }" class="bg-white text-black border-x border-gray-300 px-6 h-10 hover:bg-gray-200 transition">
        Conteudo da pagina
      </button>
      <button (click)="activeTab = 3" [ngClass]="{
          'bg-black text-white': activeTab === 3,
          'bg-white text-black hover:bg-gray-200': activeTab !== 3
        }" class="bg-white text-black border-r border-gray-300 px-6 h-10 hover:bg-gray-200 transition">
        Disponibilidade
      </button>
      <button (click)="adicionarDetalhe()" [ngClass]="{
    'bg-black text-white': activeTab === 4,
    'bg-white text-black hover:bg-gray-200': activeTab !== 4
  }" class="bg-white text-black px-6 rounded-r-md h-10 hover:bg-gray-200 transition">
        Detalhes do Pacote
      </button>


    </div>

    <button (click)="submit()" class="bg-black text-white px-6 rounded-md h-10 transition">
      Salvar Pacote
    </button>
  </div>



  <div class="p-4 border border-[#CDCDCD] bg-white rounded-md text-text-primary">
    <form [formGroup]="form" (ngSubmit)="submit()" class="grid grid-cols-1 gap-4" autocomplete="off">
      @if (activeTab === 1) {
      <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
        <div>
          <label for="title" class="block">Título</label>
          <input id="title" formControlName="title" type="text"
            class="border border-gray-300 rounded-md w-full p-2 focus:outline-none focus:ring focus:ring-primary" />
        </div>

        <div>
          <label for="durationDays" class="block">Duração (dias)</label>
          <input id="durationDays" formControlName="durationDays" type="number"
            class="border border-gray-300 rounded-md w-full p-2 focus:outline-none focus:ring focus:ring-primary" />
        </div>
      </div>

      <div>
        <label for="place" class="block mb-1">Local</label>
        <input id="place" formControlName="place" type="text"
          class="border border-gray-300 rounded-md w-full p-2 focus:outline-none focus:ring focus:ring-primary" />
      </div>

      <div>
        <label for="country" class="block mb-1">País</label>
        <input id="country" formControlName="country" type="text"
          class="border border-gray-300 rounded-md w-full p-2 focus:outline-none focus:ring focus:ring-primary" />
      </div>

      <div>
        <label for="region" class="block mb-1">Região</label>
        <input id="region" formControlName="region" type="text"
          class="border border-gray-300 rounded-md w-full p-2 focus:outline-none focus:ring focus:ring-primary" />
      </div>
      <div>
        <label for="typeTrip" class="block font-medium mb-1">Tipo de Viagem</label>
        <input id="typeTrip" formControlName="typeTrip" type="text"
          class="border border-gray-300 rounded-md w-full p-2 focus:outline-none focus:ring focus:ring-primary" />
      </div>

      <div>
        <label for="environment" class="block font-medium mb-1">Ambiente</label>
        <input id="environment" formControlName="environment" type="text"
          class="border border-gray-300 rounded-md w-full p-2 focus:outline-none  focus:ring focus:ring-primary" />
      </div>

      <div>
        <label for="valorBase" class="block font-medium mb-1">Valor Base (R$)</label>
        <input id="valorBase" formControlName="valorBase" type="number" step="0.01"
          class="border border-gray-300 rounded-md w-full p-2 focus:outline-none focus:ring-2 focus:ring-black" />
      </div>
      } @else if (activeTab === 2) {
      <div>
        <label for="description" class="block mb-2">Descrição</label>
        <textarea id="description" formControlName="description"
          class="border border-gray-300 rounded-md w-full p-2 focus:outline-none focus:ring focus:ring-primary"></textarea>
      </div>
      <div>
        <label for="pdfItinerary" class="block font-medium mb-1">Link PDF Roteiro</label>
        <input id="pdfItinerary" formControlName="pdfItinerary" type="text"
          class="border border-gray-300 rounded-md w-full p-2 focus:outline-none focus:ring focus:ring-primary" />
      </div>
      <div>
        <label for="image" class="block font-medium mb-1">Imagem do Pacote</label>
        <input id="image" type="file" (change)="onImageSelected($event)" multiple class="block w-full text-sm text-gray-600
                file:mr-4 file:py-2 file:px-4
                file:rounded-md file:border-0
                file:text-sm file:font-semibold
                file:bg-black file:text-white
                hover:file:bg-gray-800
          " />
      </div>

      } @else if (activeTab === 3) {
      <div formArrayName="availability">
        <div class="mb-4">
          <h3 class="text-lg font-semibold mb-2 border-b pb-1">Disponibilidades</h3>

          <div *ngFor="let group of availabilityForm.controls; let i = index" [formGroupName]="i"
            class="border border-gray-300 p-4 rounded-md mb-4">
            <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
              <div>
                <label class="block font-medium mb-1">Data de Entrada</label>
                <input type="date" formControlName="dateIn"
                  class="border border-gray-300 rounded-md w-full p-2 focus:outline-none focus:ring focus:ring-primary" />
              </div>

              <div>
                <label class="block font-medium mb-1">Data de Saída</label>
                <input type="date" formControlName="dateOut"
                  class="border border-gray-300 rounded-md w-full p-2 focus:outline-none focus:ring focus:ring-primary" />
              </div>

              <div>
                <label class="block font-medium mb-1">Preço (R$)</label>
                <input type="number" formControlName="price"
                  class="border border-gray-300 rounded-md w-full p-2 focus:outline-none focus:ring focus:ring-primary" />
              </div>

              <div>
                <label class="block font-medium mb-1">Vagas</label>
                <input type="number" formControlName="vacancyAvailability"
                  class="border border-gray-300 rounded-md w-full p-2 focus:outline-none focus:ring focus:ring-primary" />
              </div>

              <div>
                <label class="block font-medium mb-1">Status</label>
                <select formControlName="status"
                  class="border border-gray-300 rounded-md w-full p-2 focus:outline-none focus:ring focus:ring-primary">
                  <option value="Ativo">Ativo</option>
                  <option value="Inativo">Inativo</option>
                </select>
              </div>
            </div>

            <button type="button" (click)="removeAvailability(i)" class="mt-4 text-sm text-red-600 hover:underline">
              Remover disponibilidade
            </button>
          </div>

          <button type="button" (click)="addAvailability()"
            class="bg-gray-200 text-black px-4 py-2 rounded-md hover:bg-gray-300 transition">
            + Adicionar Disponibilidade
          </button>
        </div>
      </div>
      }
    </form>
  </div>

</div>
